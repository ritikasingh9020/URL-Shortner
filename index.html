<!DOCTYPE html>
<html>
    <head>
        <title>URL Shortener</title>
        <style>
            *{
                padding: 0%;
                margin: 0%;
            }
        header{
            text-align: center;
            background-color: black;
            color:aliceblue;
           width:100%;
        padding: 5px;
        font-size: 40px;
        margin: auto;
         }
        
         .div1{
            background-image: url("pic2.jpg");
            padding:7px;
            height: 77vh;                   
         }
         .div1 p{
            font-size: 30px;
            margin-top: 90px; 
            margin-left: 250px;
            color:black;
            font-weight: bold;
            background-color:azure;
            padding: 20px;
            width:150px
        }
        input{
            padding:15px;
            width:800px;
            margin-left: 250px;
            border:none;
            background-color: rgb(232, 239, 239);
            
        }
        .button1{
            border:none;
            background-color: black;
            color:white;
            padding:15px;
            width:835px;
            margin-left: 250px;
            cursor:pointer;
            margin-top:15px;
        }
        .button2{
            position: relative;
            left: -47px;  
            top:7px;
            padding:5px;
            border:none;
            background-color: black;
            color: aliceblue;
            border-radius: 15px;
        }
        .button2:hover{
            color:black;
            background-color: yellow;
            cursor: pointer;
        }
        .button1:hover{
            color:black;
            background-color: yellow;
            cursor: pointer;
        }
        
        </style>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

    </head>
    <body>
        <header>
             <h3>Create Short URL</h3>         
        </header>
        <div class="div1">
         <p>Enter Link</p>
         <input type="text" class="input" placeholder="http://site.com" id="longurl" onkeydown="
         console.log('typing...');
         console.log(event.key)
         if(event.key=='Enter'){
            short();
         }">   
        <br>
        <button class="button1" id="shorten">Create Short Link</button>  <br><br>
        
        <input type="text" class="input" placeholder="Shortened Link" id="shorturl"> 
        
        <button class="button2" id="copy"><span class="material-symbols-outlined">
            content_copy
            </span>
            </button>
    </div>
    <script>
        let btn = document.getElementById("shorten");

        btn.addEventListener('click',short);

        async function short(){
            let longURL=document.getElementById("longurl").value;
            let shortURL=document.getElementById("shorturl");

           const result =await fetch(`https://api.shrtco.de/v2/shorten?url=${longURL}`);
          
           const data= await result.json();
          
           shortURL.value=data.result.short_link2;
        }
    </script>
    <script>
        let newURL= document.getElementById("shorturl");
        let cop= document.getElementById("copy");

       cop.onclick = ()=>{

        newURL.select();

        window.navigator.clipboard.writeText(newURL.value);
       }
    </script>
   
    </body>
</html>